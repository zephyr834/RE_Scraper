var move=window.move=window.move||{};move.map=move.map||{},google.maps.LatLng.prototype.toGeoJSON=function(){return{type:"Point",coordinates:[this.lng(),this.lat()]}},google.maps.LatLngBounds.prototype.getNorthWest=function(){var e=this.getNorthEast(),t=this.getSouthWest();return new google.maps.LatLng(e.lat(),t.lng())},google.maps.LatLngBounds.prototype.getTopLeft=function(){var e=this.getNorthWest();return e.toGeoJSON()},google.maps.LatLngBounds.prototype.getSouthEast=function(){var e=this.getNorthEast(),t=this.getSouthWest();return new google.maps.LatLng(t.lat(),e.lng())},google.maps.LatLngBounds.prototype.getBottomRight=function(){var e=this.getSouthEast();return e.toGeoJSON()},google.maps.LatLngBounds.prototype.getBoundary=function(){var e=this.getNorthEast(),t=this.getSouthWest();return{type:"Polygon",coordinates:[[[t.lng(),e.lat()],[e.lng(),e.lat()],[e.lng(),t.lat()],[t.lng(),t.lat()],[t.lng(),e.lat()]]]}},google.maps.LatLngBounds.prototype.getZoom=function(){return this.zoom=void 0===this.zoom?0:this.zoom,this.zoom},google.maps.LatLngBounds.prototype.setZoom=function(e){this.zoom=e},google.maps.LatLngBounds.prototype.getCopy=function(){var e=this.getSouthWest(),t=this.getNorthEast(),o=new google.maps.LatLngBounds(e,t);return o.setZoom(this.getZoom()),o},google.maps.LatLngBounds.prototype.calculateZoom=function(e,t){t=void 0===t?13:t;var o,n,i,a=t,s=256,r=this.getSouthWest(),l=this.getNorthEast();return e=e||1200,o=r.lng(),n=l.lng(),i=n-o,i<0&&(i+=360),a=Math.floor(Math.log(360*e/i/s)/Math.LN2),(isNaN(a)||a<1||a>21)&&(a=t),a},move.tools.Utils.prototype.milesToKm=function(e){return 1.60934*Number(e)},move.tools.Utils.prototype.kmToMiles=function(e){return.621371*Number(e)},move.tools.Utils.prototype.isPoint=function(e){var t=this;return t.hasValue(e)&&t.hasValue(e.x)&&t.hasValue(e.y)||e instanceof google.maps.Point},move.tools.Utils.prototype.toPoint=function(e){var t=this,o=null;return t.hasValue(e)&&(t.hasValue(e.x)&&t.hasValue(e.y)?o=new google.maps.Point(e.x,e.y):e instanceof google.maps.Point&&(o=e)),o},move.tools.Utils.prototype.isSize=function(e){var t=this;return t.hasValue(e)&&t.hasValue(e.width)&&t.hasValue(e.height)||e instanceof google.maps.Size},move.tools.Utils.prototype.toSize=function(e){var t=this,o=null;return t.hasValue(e)&&(t.hasValue(e.width)&&t.hasValue(e.height)?o=new google.maps.Size(e.x,e.y):e instanceof google.maps.Size&&(o=e)),o},move.tools.Utils.prototype.isIcon=function(e){return e&&e.origin&&e.size&&e.url},move.tools.Utils.prototype.isPosition=function(e){var t=this,o=!1;return t.hasValue(e)&&(e instanceof google.maps.LatLng?o=!0:t.hasValue(e.type)&&t.hasValue(e.coordinates)&&"Point"===e.type?o=!0:t.hasValue(e.longitude)&&t.hasValue(e.latitude)?o=!0:t.hasValue(e.lng)&&t.hasValue(e.lat)&&(o=!0)),o},move.tools.Utils.prototype.toPosition=function(e){var t=this,o=null;return t.hasValue(e)&&(e instanceof google.maps.LatLng?o=e:t.hasValue(e.type)&&t.hasValue(e.coordinates)&&"Point"===e.type?o=new google.maps.LatLng(e.coordinates[1],e.coordinates[0]):t.hasValue(e.longitude)&&t.hasValue(e.latitude)?o=new google.maps.LatLng(t.getValue(e.latitude),t.getValue(e.longitude)):t.hasValue(e.lng)&&t.hasValue(e.lat)&&(o=new google.maps.LatLng(e.lat,e.lng))),o},move.tools.Utils.prototype.toPaths=function(e){var t,o=this,n=[],i=[],a=function(e){return new google.maps.LatLng(e.coordinates[1],e.coordinates[0])},s=function(e){var t=[];return jQuery.each(e.coordinates,function(e,o){t.push(a({coordinates:o}))}),t},r=function(e){var t=[];return jQuery.each(e.coordinates,function(e,o){t.push(s({coordinates:o}))}),t};return o.hasValue(e)&&(o.hasValue(e.type)&&o.hasValue(e.coordinates)?"Point"===e.type?n.push(a(e)):"Polygon"===e.type?(i=r(e),i.length>1?jQuery.each(i,function(e,t){n.push(t)}):n.push(i[0])):"MultiPolygon"===e.type?jQuery.each(e.coordinates,function(e,t){i=r({coordinates:t}),i.length>1?jQuery.each(i,function(e,t){n.push(t)}):n.push(i[0])}):"MultiPoint"===e.type?n=s(e):"PolyLine"===e.type?n=s(e):"LineString"===e.type?n=s(e):"MultiLineString"===e.type&&(n=s(e)):"Array"===o.getType(e)?(t=o.toSingleArray(e),jQuery.each(t,function(e,t){n.push(o.toPosition(t))})):o.hasValue(e.longitude)&&o.hasValue(e.latitude)?n.push(o.toPosition(e)):o.hasValue(e.lng)&&o.hasValue(e.lat)?n.push(o.toPosition(e)):e instanceof google.maps.LatLng&&n.push(e)),n},move.tools.Utils.prototype.boundsToString=function(e){var t;return e&&e.toUrlValue&&(t=[e.toUrlValue(),",",e.getZoom()].join("")),t},move.tools.Utils.prototype.stringToBounds=function(e){var t,o,n,i,a=this,s=function(e){return Number(parseFloat(e))};return a.hasValue(e)&&(t=e.split(","),t.length>=4&&(o=new google.maps.LatLng(s(t[0]),s(t[1])),n=new google.maps.LatLng(s(t[2]),s(t[3])),i=new google.maps.LatLngBounds(o,n),5===t.length&&i.setZoom(parseInt(t[4],10)))),i},move.tools.Utils.prototype.toBounds=function(e){var t,o,n,i=this,a=[];return i.hasValue(e)&&(e instanceof google.maps.LatLngBounds?a=e:i.hasValue(e)&&i.hasValue(e.southWest)&&i.hasValue(e.northEast)?a=new google.maps.LatLngBounds(i.toPosition(e.southWest),i.toPosition(e.northEast)):i.hasValue(e)&&i.hasValue(e.bottomLeft)&&i.hasValue(e.topRight)?a=new google.maps.LatLngBounds(i.toPosition(e.bottomLeft),i.toPosition(e.topRight)):i.hasValue(e)&&i.hasValue(e.bottomRight)&&i.hasValue(e.topLeft)?(o=new google.maps.LatLng(e.topLeft.coordinates[1],e.bottomRight.coordinates[0]),t=new google.maps.LatLng(e.bottomRight.coordinates[1],e.topLeft.coordinates[0]),a=new google.maps.LatLngBounds(o,t)):i.hasValue(e.type)&&i.hasValue(e.coordinates)?(a=new google.maps.LatLngBounds,n=i.getSingleArray(i.toPaths(e)),n&&n.length>0&&jQuery.each(n,function(e,t){a.extend(t)})):"Array"===i.getType(e)&&jQuery.each(e,function(e,t){a.push(i.toPaths(t))})),a},move.tools.Utils.prototype.createView=function(e,t){var o,n,i=this,a=13,s=[],r=[],l=[];return i.hasValue(e)&&("Array"===i.getType(e)?s=e:s.push(e)),i.hasValue(t)&&("Array"===i.getType(t)?r=t:r.push(t)),r.length>1&&(r.push(r[0]),s.push(i.toGeoJSONPolygon(r)),r=[]),s.length>0?(jQuery.each(s,function(e,t){n=i.toPaths(t),l.push(i.toSingleArray(n))}),l.length>0&&(o={bounds:new google.maps.LatLngBounds},jQuery.each(l,function(e,t){jQuery.each(t,function(e,t){o.bounds.extend(t)})}),o.bounds.isEmpty()&&(o={center:o.bounds.getCenter(),zoom:a}))):r.length>0&&(o={center:r[0],zoom:a}),o},move.tools.Utils.prototype.toGeoJSONPoint=function(e){var t=this,o={type:"Point",coordinates:[]};return e=e||{},e.type&&"Point"===e.type&&e.coordinates?o.coordinates=e.coordinates:e.latitude&&e.longitude?o.coordinates=[e.longitude,e.latitude]:e.toGeoJSON?o=e.toGeoJSON():e.lat&&e.lng&&(o.coordinates=[t.getValue(e.lng),t.getValue(e.lat)]),o},move.tools.Utils.prototype.toGeoJSONPolygon=function(e){var t=this,o={type:"Polygon",coordinates:[]};return"Array"===t.getType(e)&&(o.coordinates.push([]),jQuery.each(e,function(e,n){n.type?o.coordinates[0].push(n.coordinates):"Array"===t.getType(n)&&o.coordinates[0].push(n)})),o},move.tools.Utils.prototype.toGeoJSONMultiPolygon=function(e){var t=this,o={type:"MultiPolygon",coordinates:[]};return"Array"===t.getType(e)&&jQuery.each(e,function(e,n){n.type?o.coordinates.push(n.coordinates):"Array"===t.getType(n)&&o.coordinates.push(n)}),o},move.tools.Utils.prototype.getScale=function(e){var t;if(e){var o=40075040,n=e.getZoom(),i=e.getCenter().lat();t=parseInt(Math.abs(o*Math.cos(i)/Math.pow(2,n+8)),10)}return t},move.map.Extension=function(){"use strict";var e,t,o,n,i,a,s,r,l,u,c,p,d,g,m,h,y,v=this,f=null,b=null,w={typeAvailable:[],typeEnabled:[],typeVisible:[],typeZoomRange:[],suspended:[],request:[],response:[],complete:[],enabled:[],cached:[],boundary:[],limit:[],requestOptions:[]},C=0,x="",j=!0,O=!1,S=0,L={},k=Math.PI/180,V=1/(4*Math.PI);t=function(e){var t;jQuery.each(v.types,function(n,i){t=i.isAvailable(e),t!==i.available&&(v.types[n].available=t,o(v.types[n]),jQuery.each(w.typeAvailable,function(e,t){t(v.types[n])}))})},o=function(e){e.available&&e.enabled&&v.isCached(e.type)&&d(e.type)?v.show(e.type):v.setCached(e.type,!1)},n=function(e){if(v.map){var t=v.map.getZoom();e.available=e.isAvailable(t)}e.enabled?e.available&&(v.isCached(e.type)&&d(e.type)?v.show(e.type):(v.setCached(e.type,!1),e.discovery===!0&&v.update())):e.available&&(v.isCached(e.type)&&d(e.type)?v.hide(e.type):v.setCached(e.type,!1))},i=function(e){t(e.getZoom()),j===!0&&v.map&&(l(e),f=e.getCopy())},a=function(e,t){var o,n={};return e&&t&&jQuery.each(e,function(e,i){o="Function"===v.utils.getType(i)?v.utils.getValue(i,t):i,v.utils.isSize(o)?n[e]=v.utils.toSize(o):v.utils.isPoint(o)?n[e]=v.utils.toPoint(o):v.utils.isPosition(o)?n[e]=v.utils.toPosition(o):n[e]=o}),n},s=function(e){v.clear(e),v.cache.setup(e,r(e))},r=function(e){return{meta:{cached:!1,type:e,bounds:null,count:0,total:0,visible:0},group:{},items:{}}},c=function(e,t){jQuery.each(v.types,function(e,o){o.entities&&o.entities[v.constants.HTML_MARKER]&&o.layer.display(t)}),jQuery.each(w.complete,function(o,n){n(e,t)})},l=function(t){var o,n,i=[];C=256*Math.pow(2,t.getZoom()),b=t.getCopy(),jQuery.each(v.types,function(e,t){o=t.discovery,d(e)&&!g(e)&&v.isCached(e)?t.group&&t.group===!0&&t.enabled&&t.available&&v.items&&v.isCached(e)&&(v.hide(e),v.group(),v.show()):o===!0&&v.setCached(e,!1)}),jQuery.each(v.types,function(e,n){o=n.discovery,n.enabled&&n.available&&(!v.isCached(e)||t.force)&&o&&i.push(e)}),v.options.events.load&&(null===e&&(i=[]),i.length>0?(n={},v.options.events.loadOptions&&("Function"===v.utils.getType(v.options.loadOptions)?jQuery.extend(!0,n,v.options.events.loadOptions(i)):jQuery.extend(!0,n,v.options.events.loadOptions)),x=v.utils.guid(),n.id=x,n.topLeft=t.getTopLeft(),n.bottomRight=t.getBottomRight(),n.boundary=void 0===e?t.getBoundary():e,n.types=i,n.limit=S,n.zoom=t.getZoom(),n.options=L,jQuery.each(w.request,function(e,t){t(n)}),v.options.events.load(n,function(e){u(e,!0,i,function(){jQuery.each(w.response,function(t,o){o(e)}),c(i,t)})})):(jQuery.each(v.types,function(e){v.isCached(e)||v.hide(e)}),c(i,t)))},u=function(e,t,o,n){var i;b=v.utils.hasValue(b)?b:v.getBounds(),e&&e.results&&x===e.id&&(jQuery.each(v.types,function(e){v.isCached(e)||v.hide(e)}),v.checkBounds===!1&&o&&jQuery.each(o,function(e,t){v.hide(t)}),jQuery.each(e.results,function(e,o){i=v.types[e],i&&(v.hide(e),o=o||{},o.count=void 0===o.count?0:o.count,o.total=void 0===o.total?0:o.total,o.items=o.items||{},o.replace=void 0===o.replace?t:o.replace,o.replace===!0?(s(e),v.cache.data[e].items=o.items,v.cache.data[e].meta={count:o.count,total:o.total,visible:o.count,bounds:v.utils.hasValue(b)?b.getCopy():null,cached:o.total<=o.count}):(v.cache.exists(e)||s(e),v.cache.data[e].items=v.utils.extend(v.cache.data[e].items,o.items),v.cache.data[e].meta.count=v.cache.data[e].meta.count+o.count,v.cache.data[e].meta.visible=v.cache.data[e].meta.count,v.cache.data[e].meta.total=o.total,v.cache.data[e].meta.bounds=v.utils.hasValue(b)?b.getCopy():null,v.cache.data[e].meta.cached=o.total<=o.count),i.group===!0&&v.group(e)),v.show(e)}),n&&n())},p=function(e,t,o){var n,i,a,s,r,l,u=null,c=0,p=null,d=0,g=0,h=!0;if(t=void 0===t?v.defaultGroupRadius:t,p=[],c=0,0===t){r=e.length-1;do if(l=c-1,l>=0){do if(p[l].center.longitude===e[r].longitude&&p[l].center.latitude===e[r].latitude){p[l].dataIndices.push(r);break}while(l--);l===-1&&(i={center:{longitude:e[r].longitude,latitude:e[r].latitude},dataIndices:[]},i.dataIndices.push(r),p.push(i),c++)}else i={center:{longitude:e[r].longitude,latitude:e[r].latitude},dataIndices:[]},i.dataIndices.push(r),p.push(i),c++;while(r--)}else if(null!==n&&(r=e.length-1,r>=0))do if(a=m(e[r]),l=c-1,l>=0){do if(a.y>=p[l].top&&a.y<=p[l].bottom&&(p[l].left<=p[l].right&&a.x>=p[l].left&&a.x<=p[l].right||p[l].left>=p[l].right&&(a.x>=p[l].left||a.x<=p[l].right))){p[l].dataIndices.push(r),e[r]._clusterIndex=l;break}while(l--);l===-1&&(i={index:c,dataIndices:[],center:{longitude:e[r].longitude,latitude:e[r].latitude},left:a.x-t,right:a.x+t,top:a.y-t,bottom:a.y+t,zoom:b.getZoom()},i.dataIndices.push(r),i.left<0&&(i.left+=C),i.right>C&&(i.right-=C),e[r]._clusterIndex=c,p.push(i),c++)}else i={index:c,dataIndices:[],center:{longitude:e[r].longitude,latitude:e[r].latitude},left:a.x-t,right:a.x+t,top:a.y-t,bottom:a.y+t,zoom:b.getZoom()},i.dataIndices.push(r),i.left<0&&(i.left+=C),i.right>C&&(i.right-=C),e[r]._clusterIndex=c,p.push(i),c++;while(r--);if(n=p,null!==n&&n.length>0&&(r=n.length-1,r>=0))do p=n[r],1===p.dataIndices.length?o({id:e[p.dataIndices[0]].id,center:p.center}):(s=[],h=!0,d=-1,g=-1,p.dataIndices.sort(function(t,o){return e[t].sort&&e[o].sort?e[t].sort-e[o].sort:t-o}),jQuery.each(p.dataIndices,function(t,o){s.push(e[o].id),d===-1&&g===-1&&(d=e[o].latitude,g=e[o].longitude),h!==!0||d===e[o].latitude&&g===e[o].longitude||(h=!1)}),o({id:"group_"+v.utils.guid(),group:s,sameLocation:h,center:p.center}));while(r--);return u},d=function(e){var t=!1,o=null;return j?v.checkBounds?(o=e&&v.cache.exists(e,"meta")&&v.cache.data[e].meta.bounds&&v.isCached(e)?v.cache.data[e].meta.bounds:f,null!==o&&null!==b&&(t=o.contains(b.getNorthEast())&&o.contains(b.getSouthWest()))):t=!1:t=!0,t},g=function(e){var t=!1,o=v.types[e],n=void 0===o.checkMeta||o.checkMeta,i=v.cache.exists(e,"meta")?v.cache.data[e].meta:null;return n===!0?null!==i&&(t=i.total>i.count||0===i.total&&0===i.count):t=!0,t},m=function(e){var t,o,n;return t=Math.sin(e.latitude*k),1!==t&&t!==-1||(t+=1e-10),o=(e.longitude+180)/360*C,n=(.5-Math.log((1+t)/(1-t))*V)*C,{x:Math.round(o),y:Math.round(n)}},h=function(e,t){var o,n=[];return e&&jQuery.each(e,function(e,i){o={id:i.id,type:i.type,longitude:0,latitude:0,sort:0},i[t]&&(i[t].type&&i[t].coordinates&&(o.longitude=i[t].coordinates[0],o.latitude=i[t].coordinates[1]),o.sort=i.sort),void 0!==i.plot&&i.plot!==!0||n.push(o),i.groupId&&delete i.groupId}),n},y=function(e,t,o){var n,i=v.types[e],a=function(e,t,o){var n=[];"Array"===v.utils.getType(t)?n=t:n.push(t),jQuery.each(v.cache.data[e.type].items,function(t,i){jQuery.each(n,function(t,n){i=v.create(i,e),i.map&&i.map[n]&&i.map[n].setMap&&(null===o?i.map[n].setMap(null):e.entities[n].display===!0&&i.map[n].setMap(o))})})};t?t===v.constants.HTML_MARKER?o?i.layer.show():i.layer.hide():a(i,t,o===!0?v.map:null):(n=[],jQuery.each(i.entities,function(e){e!==v.constants.HTML_MARKER&&n.push(e)}),n.length>0&&a(i,n,o===!0?v.map:null),i.entities[v.constants.HTML_MARKER]&&(o?i.layer.show():i.layer.hide()))},v.options=void 0,v.constants={HTML_MARKER:"htmlMarker",GOOGLE_MARKER:"marker",GOOGLE_POLYGON:"polygon",GOOGLE_POLYLINE:"polyline",GOOGLE_CIRCLE:"circle"},v.map=void 0,v.utils=void 0,v.cache=void 0,v.storage=void 0,v.client=void 0,v.types={},v.checkBounds=!0,v.onTypeAvailableChanged=function(e){v.utils.addToEvents(e,w.typeAvailable)},v.onTypeEnabledChanged=function(e){v.utils.addToEvents(e,w.typeEnabled)},v.onTypeVisibleChanged=function(e){v.utils.addToEvents(e,w.typeVisible)},v.onTypeZoomRangeChanged=function(e){v.utils.addToEvents(e,w.typeZoomRange)},v.onRequest=function(e){v.utils.addToEvents(e,w.request)},v.onResponse=function(e){v.utils.addToEvents(e,w.response)},v.onComplete=function(e){v.utils.addToEvents(e,w.complete)},v.onEnabledChanged=function(e){v.utils.addToEvents(e,w.enabled)},v.onCachedChanged=function(e){v.utils.addToEvents(e,w.cached)},v.onBoundaryChanged=function(e){v.utils.addToEvents(e,w.boundary)},v.onLimitChanged=function(e){v.utils.addToEvents(e,w.limit)},v.onRequestOptionsChanged=function(e){v.utils.addToEvents(e,w.requestOptions)},v.onSuspendedChanged=function(e){v.utils.addToEvents(e,w.suspended)},v.setOptions=function(t){v.options=v.options||{},jQuery.each(t,function(e,t){jQuery.inArray(e,["map","utils","cache","storage","client"])===-1&&(v.options[e]=t)}),v.options.groupRadius=void 0===v.options.groupRadius?30:v.options.groupRadius,v.options.checkBounds=void 0===v.options.checkBounds||v.options.checkBounds,v.map=t.map,v.client=t.client,v.cache=t.cache||new move.tools.Cache,v.utils=t.utils||new move.tools.Utils,v.storage=t.storage||new move.tools.Storage,j=void 0===t.enabled||t.enabled,e=t.boundary,S=void 0===t.limit?0:t.limit,L=t.requestOptions,v.options.events.changed&&v.options.events.changed(i),void 0!==v.options.enabled&&v.setEnabled(v.options.enabled)},v.setRecipe=function(e,t,o){var n=!1,i=function(e,t,o){if(n===!1)if(void 0!==e[t])n=!0,e[t]=o;else for(var a in e)e.hasOwnProperty(a)&&n===!1&&"object"==typeof e[a]&&i(e[a],t,o)};v.types[e]&&(n=!1,i(v.types[e],t,o))},v.getBounds=function(e){return v.map&&(e=e||v.map.getBounds(),e&&e.setZoom(v.map.getZoom())),e&&(e.force=void 0!==e.force&&e.force),e},v.getTypeAvailable=function(e){var t=!1;return v.types[e]&&(t=v.types[e].available),t},v.setTypeAvailable=function(e,t){var n=[];"Array"===v.utils.getType(e)?n=e:n.push(e),jQuery.each(n,function(e,n){v.types[n]&&t!==v.types[n].available&&(v.types[n].available=t,o(v.types[n]),jQuery.each(w.typeAvailable,function(e,t){t(v.types[n])}))})},v.getTypeEnabled=function(e){var t=!1;return v.types[e]&&(t=v.types[e].enabled),t},v.setTypeEnabled=function(e,t){var o=[];"Array"===v.utils.getType(e)?o=e:o.push(e),jQuery.each(o,function(e,o){v.types[o]&&t!==v.types[o].enabled&&(v.types[o].enabled=t,n(v.types[o]),jQuery.each(w.typeEnabled,function(e,t){t(v.types[o])}))})},v.getTypeVisible=function(e){var t=!1;return v.types[e]&&(t=v.types[e].visible),t},v.setTypeVisible=function(e,t){var o=[];"Array"===v.utils.getType(e)?o=e:o.push(e),jQuery.each(o,function(e,o){v.types[o]&&t!==v.types[o].visible&&(v.types[o].visible=t,y(o,void 0,t),jQuery.each(w.typeVisible,function(e,t){t(v.types[o])}))})},v.getTypeZoomRange=function(e){var t;return v.isValid(e)&&(t=v.types[e].zoomRange),t},v.setTypeZoomRange=function(e,t){var o=[];"Array"===v.utils.getType(e)?o=e:o.push(e),t&&jQuery.each(o,function(e,o){(v.types[o]&&t[0]!==v.types[o].zoomRange[0]||t[1]!==v.types[o].zoomRange[1])&&(v.types[o].zoomRange[0]=t[0],v.types[o].zoomRange[1]=t[1],jQuery.each(w.zoomRange,function(e,t){t(v.types[o])}))})},v.setEnabled=function(e){j!==e&&(j=e,jQuery.each(w.enabled,function(e){e(j)}))},v.getEnabled=function(){return j},v.setBoundary=function(t){e!==t&&(e=t,jQuery.each(w.boundary,function(e){e()}))},v.clearBoundary=function(){v.setBoundary(void 0)},v.getBoundary=function(){return e},v.setLimit=function(e){e=parseInt(e,10),S!==e&&(S=e,jQuery.each(w.limit,function(e){e()}))},v.clearLimit=function(){v.setLimit(0)},v.getLimit=function(){return S},v.setRequestOptions=function(e){void 0!==e?(L=L||{},jQuery.extend(!0,L,e)):L={},jQuery.each(w.requestOptions,function(e){e()})},v.clearRequestOptions=function(){v.setRequestOptions(void 0)},v.getRequestOptions=function(){return L},this.getSuspended=function(){return O},v.setSuspended=function(e){O!==e&&(O=e,jQuery.each(w.suspended,function(e,t){t(O)}))},v.update=function(e,t,o){var n,a;v.map&&(o=void 0!==o&&o,n=v.getBounds(),void 0===e&&n&&(n.force=!0,i(n)),e&&e.results?(e.id=x,a=[],jQuery.each(e.results,function(e){jQuery.inArray(e,a)===-1&&a.push(e)}),u(e,o,a,function(){jQuery.each(w.response,function(t,o){o(e)}),c(a,n),t&&t()})):t&&t())},v.show=function(e,t){y(e,t,!0)},v.hide=function(e,t){y(e,t,!1)},v.register=function(e){e.enabled=void 0!==e.enabled&&e.enabled,e.visible=void 0===e.visible||e.visible,e.available=void 0!==e.available&&e.available,e.discovery=void 0===e.discovery||e.discovery,e.checkMeta=void 0===e.checkMeta||e.checkMeta,e.layer=void 0===e.layer?null:e.layer,e.isAvailable=function(e){return e>=this.zoomRange[0]&&e<=this.zoomRange[1]},e.entities=e.entities||{},jQuery.each(e.entities,function(t){e.entities[t]&&(e.entities[t].options=e.entities[t].options||{},e.entities[t].events=e.entities[t].events||{},e.entities[t].display=void 0===e.entities[t].display||e.entities[t].display)}),v.utils.hasValue(e.entities[v.constants.HTML_MARKER])&&(e.layer=new move.map.OverlayView({type:e.type,utils:v.utils,cache:v.cache,recipe:e,entity:v.constants.HTML_MARKER,layer:e.entities[v.constants.HTML_MARKER].layer,create:v.create}),e.layer.setMap(v.map)),v.types[e.type]=e,s(e.type)},v.create=function(e,t){var o,n,i,s,r=null;return e&&!e.map&&(t=t||v.types[e.type],t&&(e.map={},jQuery.each(t.entities,function(t,l){n=v.utils.getValue(l.mapping,e),o=e[n],r=null,t===v.constants.HTML_MARKER?e.map.position=v.utils.toPosition(o):(i=a(l.options,e),t===v.constants.GOOGLE_MARKER?(e.map.position=v.utils.toPosition(o),i.position=e.map.position,v.utils.hasValue(i.position)&&(r=new google.maps.Marker(i))):t===v.constants.GOOGLE_POLYGON?(i.paths=v.utils.toPaths(o),v.utils.hasValue(i.paths)&&(r=new google.maps.Polygon(i))):t===v.constants.GOOGLE_POLYLINE?(i.path=v.utils.toPaths(o),v.utils.hasValue(i.path)&&(r=new google.maps.Polyline(i))):t===v.constants.GOOGLE_CIRCLE&&(e.map.position=v.utils.toPosition(o),i.center=e.map.position,v.utils.hasValue(e.radius)&&(i.radius=v.utils.getValue(e.radius)),v.utils.hasValue(i.center)&&v.utils.hasValue(i.radius)&&(r=new google.maps.Circle(i))),s=v.utils.getValue(l.events,e),jQuery.each(s,function(e,t){google.maps.event.addListener(r,e,t)}),null!==r&&(r.move={},e.id&&(r.move.id=e.id.toString()),r.move.type=e.type,r.move.entity=t,v.utils.hasValue(e.group)&&e.group.length>0&&(r.move.group=e.group.slice(),r.move.sameLocation=e.sameLocation),e.map[t]=r))}))),e},v.createView=function(e){var t,o,n=[],i=[];return jQuery.each(e,function(e,a){t=v.types[a.type],jQuery.each(t.entities,function(e,t){t.mapping&&(o=v.utils.getValue(a[t.mapping],a),o&&(o.type&&"Point"===o.type?i.push(o):n.push(o)))})}),v.utils.createView(n,i)},v.createBoundingBox=function(e,t,o){o=o||"mi",o=o.toLowerCase(),o="miles"===o?"mi":o,o="kilometer"===o?"km":o,t=void 0===t?0:Number(t),t="mi"===o&&t>0?v.utils.milesToKm(t):t;var n,i,a,s,r,l=v.createView(e);return l&&l.bounds&&(i=t>0?google.maps.geometry.spherical.computeOffset(l.bound.getSouthWest(),t,-135):l.bounds.getSouthWest(),a=t>0?google.maps.geometry.spherical.computeOffset(l.bounds.getNorthEast(),t,45):l.bounds.getNorthEast(),s=new google.maps.LatLngBounds(i,a),r=v.utils.boundsToRectangle(s),n=r.boundary),n},v.suspend=function(){v.setSuspended(!0)},v.resume=function(){v.setSuspended(!1)},v.dispose=function(e){void 0!==e&&null!==e&&(e.setMap&&e.setMap(null),google.maps.event.clearInstanceListeners(e))},v.trigger=function(e,t,o,n){e&&(e.map||(e=v.create(e)),google.maps.event.trigger(e.map[t],o,n))},v.clear=function(e){var t=function(e,t){if(v.cache.exists(e,t)){for(var o in v.cache.data[e][t])if(v.cache.data[e][t].hasOwnProperty(o)&&v.cache.data[e][t][o].map){for(var n in v.cache.data[e][t][o].map)v.cache.data[e][t][o].map.hasOwnProperty(n)&&void 0!==v.cache.data[e][t][o].map[n]&&null!==v.cache.data[e][t][o].map[n]&&v.cache.data[e][t][o].map[n].setMap&&(v.cache.data[e][t][o].map[n].setMap(null),v.cache.data[e][t][o].map[n]=null);v.cache.data[e][t][o].map=null,delete v.cache.data[e][t][o].map}v.cache.clear(e,t)}};v.cache.exists(e)&&(v.hide(e),t(e,"items"),t(e,"group"))},v.add=function(e){var t,o=[];"Array"===v.utils.getType(e)?o=e:o.push(e),jQuery.each(o,function(e,o){t=v.types[o.type],t&&(o=v.create(o,t),v.cache.data[o.type].items[o.id]=o,jQuery.each(t.entities,function(e,t){t.display===!0&&o.map&&o.map[e]&&o.map[e].setMap&&o.map[e].setMap(v.map)}))})},v.remove=function(e,t){if(e&&t){var o=v.cache.data[e].items[t];o&&(o.groupId&&delete v.cache.data[e].group[o.groupId],delete v.cache.data[e].items[t])}},v.group=function(e,t){var o,n,i,a,s,r=void 0===t?v.options.groupRadius:t;v.cache.exists(e)&&(o=v.cache.data[e].items,v.cache.clear(e,"group"),a=v.types[e],a&&void 0!==a.groupRadius&&(r=a.groupRadius),a.entities[v.constants.HTML_MARKER]?s=a.entities[v.constants.HTML_MARKER].mapping:a.entities[v.constants.GOOGLE_MARKER]&&(s=a.entities[v.constants.GOOGLE_MARKER].mapping),i=h(o,s),i.length>0&&p(i,r,function(t){t&&t.id&&t.id.toString().indexOf("group")>-1&&(n={id:t.id,type:e,plot:!0,group:t.group.slice(),sameLocation:t.sameLocation},n[s]={type:"Point",coordinates:[t.center.longitude,t.center.latitude]},n=v.create(n,a),v.cache.data[e].group[n.id]=n,jQuery.each(n.group,function(t,o){v.cache.data[e].items[o].groupId=n.id}))}))},v.isCached=function(e){var t=!1;return v.cache.exists(e)&&(t=v.cache.data[e].meta.cached===!0),t},v.setCached=function(e,t){v.cache.exists(e)||s(e),v.cache.data[e].meta.cached!==t&&(v.cache.data[e].meta.cached=t,jQuery.each(w.cached,function(o){o(e,t)}))},v.getCached=function(e){return v.cache.exists(e)||s(e),v.cache.data[e].meta.cached},v.getCount=function(e){var t=0;return v.cache.exists(e,"meta")&&(t=v.cache.data[e].meta.count),t},v.getTotal=function(e){var t=0;return v.cache.exists(e,"meta")&&(t=v.cache.data[e].meta.total),t},v.defaultHtmlContent=function(e){return['<div data-id="',e.id,'" data-type="',e.type,'"></div>'].join("")}};var move=window.move=window.move||{};move.map=move.map||{},move.map.OverlayView=function(e){"use strict";var t=this;"undefined"!=typeof google&&google.maps.OverlayView.call(this,e),t.options=e,t.options.events=t.options.events||{},t.options.layer=t.options.layer||"overlayMouseTarget",t.container=null},"undefined"!=typeof google&&(move.map.OverlayView.prototype=Object.create(google.maps.OverlayView.prototype),move.map.OverlayView.prototype.constructor=move.map.OverlayView),move.map.OverlayView.prototype.onAdd=function(){var e,t=this,o=t.options.recipe,n=t.options.entity,i=o.entities[n].options.zIndex,a=t.getPanes();null===t.container&&(t.container=document.createElement("div"),t.container.style.borderStyle="none",t.container.style.borderWidth="0px",t.container.style.position="absolute",t.container.style.width="100%",t.container.style.height="100%",t.container.style.zIndex=i.toString(),t.container.className=["js-move-map-overlay-",o.type].join("")),e=a[t.options.layer],e&&e.appendChild&&e.appendChild(t.container),t.hide()},move.map.OverlayView.prototype.onRemove=function(){var e=this;jQuery(e.container).off(),e.container.parentNode.removeChild(e.container),e.container=null},move.map.OverlayView.prototype.draw=function(){var e=this,t=e.getMap();t&&e.display(t.getBounds())},move.map.OverlayView.prototype.display=function(e){var t=this,o=t.options.utils,n=t.options.cache,i=t.options.recipe,a=t.options.entity,s=i.group===!0,r=0,l=i.entities[a],u=void 0===l.options.element?"div":l.options.element,c=l.options.offset||{x:0,y:0},p=t.getProjection(),d=jQuery(this.container),g=document.createDocumentFragment(),m=document.createElement("div"),h=function(e){var t;return e&&(m.innerHTML=e.trim(),t=m.childNodes[0]),t},y=function(n){var a,s,u,d,m;o.hasValue(l.options.content)&&p&&(!n.map&&t.options.create&&(n=t.options.create(n,i)),d=void 0===n.plot||n.plot,o.hasValue(n.map.position)&&e.contains(n.map.position)&&d===!0&&(r++,a=p.fromLatLngToDivPixel(n.map.position),s=o.getValue(l.options.content,n),u=l.options.zIndex,m=h(s),m&&(m.style.top=a.y+c.y+"px",m.style.left=a.x+c.x+"px",m.style.position="absolute",u&&(m.style.zIndex=u),g&&g.appendChild&&g.appendChild(m))))};i.available&&i.enabled&&i.visible?(r=0,s===!0?(jQuery.each(n.data[i.type].group,function(e,t){y(t)}),jQuery.each(n.data[i.type].items,function(e,t){void 0===t.groupId&&y(t)})):jQuery.each(n.data[i.type].items,function(e,t){y(t)}),n.data[i.type].meta.visible=r,void 0===g.childElementCount&&g.childNodes&&(g.childElementCount=g.childNodes.length),g.childElementCount>0?(t.clear(),this.container&&this.container.appendChild&&this.container.appendChild(g),l.display===!0&&t.show(),l.events&&jQuery.each(l.events,function(e,t){d.on(e,u,t)})):d.length>0&&t.clear()):d.length>0&&t.clear()},move.map.OverlayView.prototype.clear=function(){jQuery(this.container).off().html("")},move.map.OverlayView.prototype.show=function(){jQuery(this.container).show()},move.map.OverlayView.prototype.hide=function(){jQuery(this.container).hide()};var move=window.move=window.move||{};move.map=move.map||{},move.map.Client=function(e){var t,o,n,i,a,s,r=this,l={error:[],failure:[]};r.onError=function(e){r.addToEvents(e,l.error)},r.onFailure=function(e){r.addToEvents(e,l.failure)},r.options=e,r.options.id=r.options.id||"map",r.options.unit=r.options.unit||"mi",r.options.onError&&r.addToEvents(r.options.onError,l.error),r.options.onFailure&&r.addToEvents(r.options.onFailure,l.failure),t=function(e,t,o){console&&console.error&&console.error("XML Request: "+e+", Text: "+t+", Error: '"+o+"'"),jQuery.each(l.error,function(n,i){i&&i({request:e,status:t,error:o})})},o=function(e){console&&console.log&&console.log("Failure: ",e),jQuery.each(l.failure,function(t,o){o&&o(e)})},i=function(e,o){e=e||{},o=void 0!==o&&o;var i={cache:!1,type:e.type||"get",async:void 0===e.async||e.async,url:n(e,o),data:e.data,dataType:e.dataType||"jsonp",crossDomain:void 0===e.crossDomain||e.crossDomain,contentType:e.contentType||"application/json",error:e.error||t};return i},n=function(e,t){t=void 0!==t&&t;var o,n,i=void 0===e.id?"":"/"+e.id,a=!0,s="/"===r.options.url.charAt(r.options.url.length-1)?"":"/",l="";return e.values&&"Array"===r.getType(e.values)&&e.values.length>0&&(l="/"+e.values.join("/")),t?(n=[r.options.url,s,"api/",e.controller,"/",e.action,i,l,"?client_id=",r.options.id],a=!1):n=[r.options.url,s,e.controller,"/",e.action,"/",r.options.id,i,l],void 0!==e.queryValues&&jQuery.each(e.queryValues,function(e,t){n.push([a?"?":"&",e,"=",t].join("")),a=!1}),o=n.join("")},this.getUrl=n,r.getType=function(e){return!!e&&Object.prototype.toString.call(e).match(/(\w+)\]/)[1]},r.guid=function(){return"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx".replace(/x/g,function(){return Math.floor(16*Math.random()).toString(16).toUpperCase()})},r.addToEvents=function(e,t){var o=!1;return e&&jQuery.inArray(e,t)===-1&&(t.push(e),o=!0),o},r.createResponse=function(e){var t={meta:{build:"0.0.0",comment:"Created on client side"},results:{}},o=[];return e&&("Array"===r.getType(e)?o=e:o.push(e),jQuery.each(o,function(e,o){t.results[o.type]||(t.results[o.type]={count:0,total:0,type:"",items:{}}),t.results[o.type].count++,t.results[o.type].total++,t.results[o.type].type=o.type,t.results[o.type].items[o.id]=o})),t},a=function(e,t){e.options&&e.options.emitServiceStatus===!0&&r.options.mapContainer&&r.options.mapContainer.attr("data-status","service-request"),t=void 0===t||t;var n=i(e,t);n.success=e.success||function(t){e.options&&e.options.emitServiceStatus===!0&&r.options.mapContainer&&r.options.mapContainer.attr("data-status","service-response"),t.meta&&t.meta.errors&&o({action:e.action,controller:e.controller,response:t}),e.callback&&e.callback(t)},jQuery.ajax(n)},r.applyPolygonThinning=function(e,t){e.polygon&&(e.polygon=JSON.stringify(e.polygon)),a({controller:"Data",action:"ThinPolygon",queryValues:e,callback:t})},r.applyAreaThinning=function(e,t){e.polygon&&(e.polygon=JSON.stringify(e.polygon)),a({controller:"Data",action:"ThinArea",queryValues:e,callback:t})},r.calculateCentroid=function(e,t){e.polygon&&(e.polygon=JSON.stringify(e.polygon)),a({controller:"Data",action:"Centroid",queryValues:e,callback:t})},r.calculatePolygonSize=function(e,t){e.polygon&&(e.polygon=JSON.stringify(e.polygon)),a({controller:"Data",action:"Size",queryValues:e,callback:t})},r.calculateDistance=function(e,t){e.origin&&(e.origin=JSON.stringify(e.origin)),e.point&&(e.point=JSON.stringify(e.point)),e.polygon&&(e.polygon=JSON.stringify(e.polygon)),a({controller:"Data",action:"Distance",queryValues:e,callback:t})},r.findLargestPolygon=function(e,t){e.polygon&&(e.polygon=JSON.stringify(e.polygon)),a({controller:"Data",action:"LargestPolygon",data:e,callback:t})},r.getPosition=function(e,t){e.center&&e.center.type&&e.coordinates&&"Point"===e.center.type&&(e.longitude=e.center.coordinates[0],e.latitude=e.center.coordinates[1],delete e.center),a({controller:"Data",action:"Position",queryValues:e,callback:t})},r.getIntersect=function(e,t){e.polygon1&&(e.polygon1=JSON.stringify(e.polygon1)),e.polygon2&&(e.polygon2=JSON.stringify(e.polygon2)),a({controller:"Data",action:"Intersect",queryValues:e,callback:t})},s=function(e){return void 0===e.id&&(e.id=r.guid()),e.options&&(e.options=JSON.stringify(e.options)),e.topLeft&&(e.topLeft=JSON.stringify(e.topLeft)),e.bottomRight&&(e.bottomRight=JSON.stringify(e.bottomRight)),
e.boundary&&(e.boundary=JSON.stringify(e.boundary)),e.conditions&&(e.conditions=JSON.stringify(e.conditions)),e.types&&"Array"===r.getType(e.types)&&(e.types=e.types.join(",")),e},r.getAreas=function(e,t){a({controller:"Data",action:"Areas",queryValues:s(e),callback:t})},r.getAreaTypes=function(e){a({controller:"Data",action:"AreaTypes",callback:e})},r.getStates=function(e){a({controller:"Data",action:"States",callback:e})},r.getAmenities=function(e,t){a({controller:"Data",action:"Amenities",queryValues:s(e),callback:t})},r.getAmenityTypes=function(e,t){a({controller:"Data",action:"AmenityTypes",queryValues:{mode:e},callback:t})},r.getSchool=function(e,t){a({controller:"Data",action:"School",id:e,callback:t})},r.getSchools=function(e,t){a({controller:"Data",action:"Schools",queryValues:s(e),callback:t})},r.getSchoolCategories=function(e){a({controller:"Data",action:"SchoolCategories",callback:e})},r.getSchoolTypes=function(e){a({controller:"Data",action:"SchoolTypes",callback:e})},r.getProperties=function(e,t,o){a({controller:"Data",action:"Properties",queryValues:s(e),callback:t,options:o})},r.getCommunity=function(e,t,o){a({controller:"Data",action:"Community",queryValues:e,callback:t,options:o})},r.getPropertyLocation=function(e,t){a({controller:"Data",action:"PropertyLocation",queryValues:e,callback:t})},r.getCommuteTimes=function(e,t){a({controller:"Data",action:"CommuteTimes",data:e,callback:t})},r.getArea=function(e,t){a({controller:"Data",action:"Area",id:e,callback:t})},r.getAreaByName=function(e,t){a({controller:"Data",action:"AreaByName",queryValues:e,callback:t})},r.getAreasByName=function(e,t){a({controller:"Data",action:"AreasByName",queryValues:e,callback:t})},r.getBoundingBoxByAreName=function(e,t){a({controller:"Data",action:"BoundingBoxByAreaName",queryValues:e,callback:t})},r.getBoundingBoxByAreasName=function(e,t){a({controller:"Data",action:"BoundingBoxByAreasName",queryValues:e,callback:t})},r.getDistrict=function(e,t){a({controller:"Data",action:"District",id:e,callback:t})},r.getHtml=function(e){a(e,!1)},r.getTemplates=function(e){a({controller:"Map",action:"Templates",callback:e},!1)}};var move=window.move=window.move||{};move.map=move.map||{},move.map.DrawingTool=function(e,t){var o,n,i,a,s,r,l=this,u=[],c=[],p=!1,d=!1,g=null,m=null,h=null;move.map.Extension.call(this,e),l.setOptions(e),l.getAreas=function(){var e=[];return jQuery.each(u,function(t,o){e.push(n(o))}),e},l.getBoundary=function(){var e;return u.length>0&&(e=1===u.length?u[0]:l.utils.toGeoJSONMultiPolygon(u)),e},l.getPolygons=function(){return u},l.draw=function(e){p=!1,l.map.setOptions({draggable:!1}),l.show("drawing"),s();var t,o,n,y={addCoordinate:function(e){y.coordinates.push(e),y.coordinates.length>=2&&(t=y.coordinates[y.coordinates.length-2],o=y.coordinates[y.coordinates.length-1],n=new google.maps.Polyline({path:[new google.maps.LatLng(t[1],t[0]),new google.maps.LatLng(o[1],o[0])],map:l.map,strokeColor:"#547AB9",strokeOpacity:1,strokeWeight:2,zIndex:2,visible:!0}),c.push(n))},coordinates:[]};m=google.maps.event.addListener(l.map,"mousemove",function(e){p===!0&&d===!1&&(d=!0,y.addCoordinate([e.latLng.lng(),e.latLng.lat()]),window.setTimeout(function(){d=!1},100))}),g=google.maps.event.addListener(l.map,"mousedown",function(){p=!0,i(),y.coordinates=[]}),h=google.maps.event.addListener(l.map,"mouseup",function(){return p=!1,l.map.setOptions({draggable:!0}),0===y.coordinates.length?void(e&&e()):(y.addCoordinate([y.coordinates[0][0],y.coordinates[0][1]]),a(),void l.client.applyPolygonThinning({id:l.utils.guid(),polygon:{type:"Polygon",coordinates:[y.coordinates]},distance:l.utils.getScale(l.map)},function(t){t&&(u=[],t.entity?u.push(t.entity):t.list&&jQuery.each(t.list,function(e,t){u.push(t)}),i(),l.add(l.getAreas()),r(),e&&e())}))})},l.erase=function(e){p=!1,l.map.setOptions({draggable:!0}),i(),r(),a(),u=[],e&&e()},o=function(){l.register({type:"drawing",zoomRange:[1,21],entities:{polygon:{mapping:"boundary",display:!0,options:{fillColor:"#7F7F7F",fillOpacity:.15,strokeColor:"#547AB9",strokeOpacity:1,strokeWeight:2,zIndex:2,visible:!0}}}}),t&&t()},n=function(e,t){return{id:l.utils.guid(),type:t||"drawing",boundary:e}},s=function(){var e=l.options.mapContainer.get(0);e&&(e.style.cursor="crosshair")},r=function(){var e=l.options.mapContainer.get(0);e&&(e.style.cursor="default")},i=function(){for(var e=0,t=c.length;e<t;e++)c[e].setMap(null),c[e]=null;c=[],l.clear("drawing")},a=function(){null!==g&&(google.maps.event.removeListener(g),g=null),null!==m&&(google.maps.event.removeListener(m),m=null),null!==h&&(google.maps.event.removeListener(h),h=null)},o()},move.map.DrawingTool.prototype=Object.create(move.map.Extension.prototype),move.map.DrawingTool.prototype.constructor=move.map.DrawingTool;var move=window.move=window.move||{};move.map=move.map||{},move.map.Tiles=function(e){var t,o,n,i,a,s,r,l,u,c,p,d,g=this;this.options={},jQuery.extend(!0,g.options,e),t=new move.map.DiscoveryHelper({core:e.core,boundary:g.options.boundary,limit:g.options.limit,requestOptions:g.options.requestOptions}),this.types=t.types,this.update=t.update,this.setEnabled=t.setEnabled,this.getEnabled=t.getEnabled,this.getCached=t.getCached,this.setCached=t.setCached,this.setBoundary=t.setBoundary,this.getBoundary=t.getBoundary,this.setLimit=t.setLimit,this.getLimit=t.getLimit,this.getItem=t.getItem,this.setRequestOptions=t.setRequestOptions,this.getRequestOptions=t.getRequestOptions,this.clearCache=t.clearCache,this.clearData=t.clearData,this.getCount=t.getCount,this.getTotal=t.getTotal,this.show=function(e){t.types.setEnabled(e,!0),g.options.core.show(e)},this.hide=function(e){t.types.setEnabled(e,!1),g.options.core.hide(e)},d=function(e){t.types.updateAvailable(e.zoom)},o=function(){c("propertyOutlines","Property Outlines",[17,21]),g.options.core.onChanged(d)},l=function(e,t,o,i){p(e,t,{type:e,zoomRange:o,serverAddress:g.options.heatMapTileServer+"/"+i,tileCallback:function(e){return function(t){var o=t.levelOfDetail;if(r(o,e.zoomRange))return n(e.serverAddress,o,t)}}})},u=function(e,t,o,i){p(e,t,{type:e,zoomRange:o,serverAddress:g.options.mapTileServer+"/"+i,tileCallback:function(e){return function(t){var o=t.levelOfDetail;if(r(o,e.zoomRange))return n(e.serverAddress,o-e.zoomRange[0],t)}}})},c=function(e,t,o){p(e,t,{type:e,zoomRange:o,serverAddress:g.options.lotTileServer,tileCallback:function(e){return function(t){var o=t.levelOfDetail;if(r(o,e.zoomRange)){var n=i(t);return e.serverAddress.replace("%TILE_ID%",n)}}}})},p=function(e,o,n){t.register({type:n.type,text:o,entities:["tile"],zoomRange:n.zoomRange,tile:{mercator:{uriConstructor:function(){return n.tileCallback({zoomRange:n.zoomRange,serverAddress:n.serverAddress})}},opacity:.7,visible:!1,zIndex:200}},g.options),t.types.items[e].isTile=!0},n=function(e,t,o){return[e,"/L",a("00",String(t)),"/R",a("00000000",s(o.y)),"/C",a("00000000",s(o.x)),".png"].join("")},s=function(e){return e.toString(16)},a=function(e,t){return e.substring(0,e.length-t.length)+t},i=function(e){var t,o,n,i="";for(t=e.levelOfDetail;t>0;t--)o=0,n=1<<t-1,0!==(e.x&n)&&o++,0!==(e.y&n)&&(o++,o++),i+=o.toString();return i},r=function(e,t){return e>=t[0]&&e<=t[1]},o()};var move=window.move=window.move||{};move.map=move.map||{},move.map.StreetView=function(e,t){var o,n,i,a=this,s={visibleChanged:[],failed:[]};e=e||{},a.options=e,a.options.events=a.options.events||{},a.options.panoramaOptions=void 0===a.options.panoramaOptions?null:a.options.panoramaOptions,i=function(){if(a.options){if(a.options.mapContainer&&!a.options.container){var e=a.options.mapContainer.parent();a.options.container=e}n()}t&&t()},n=function(){a.options.map&&null===a.panorama&&(a.panorama=a.options.map.getStreetView())},o=function(e){e?(n(),a.request(e,function(e){e.loaded===!0?(a.panorama.setPosition(e.position),a.panorama.setPov(e.pov),a.panorama.setVisible(!0),null!==a.options.panoramaOptions&&a.panorama.setOptions(a.options.panoramaOptions)):(a.hide(),jQuery.each(s.failed,function(t,o){o&&o(e)}))})):a.setVisible(!0)},a.panorama=null,a.utils=a.options.utils||new move.tools.Utils,a.position=null,a.radius=50,a.pitch=0,a.setVisible=function(e){n(),a.panorama.getVisible()!==e&&(a.panorama.setVisible(e),jQuery.each(s.visibleChanged,function(e,t){t(a.panorama.getVisible())}))},a.getVisible=function(){return n(),a.panorama.getVisible()},a.hide=function(){a.setVisible(!1)},a.show=function(e){e?a.utils.isPosition(e)?(a.center=a.utils.toGeoJSONPoint(e),a.position=a.utils.toPosition(e),o(a.position)):"String"===a.utils.getType(e)&&a.geocode(e,function(e){e.loaded===!0?(a.position=e.position,o(a.position)):jQuery.each(s.failed,function(t,o){o&&o(e)})}):a.setVisible(!0)},a.hide=function(){a.setVisible(!1)},a.request=function(e,t){var o,n={};n.loaded=!1,n.position=a.utils.toPosition(e),o=new google.maps.StreetViewService,o.getPanoramaByLocation(n.position,a.radius,function(e,o){o===google.maps.StreetViewStatus.OK&&e&&e.location&&e.location.latLng?(n.loaded=!0,n.result=e,n.pov={heading:google.maps.geometry.spherical.computeHeading(e.location.latLng,n.position),pitch:a.pitch},t&&t(n)):(n.loaded=!1,t&&t(n))})},a.geocode=function(e,t){var o=new google.maps.Geocoder,n={address:e,bounds:a.options&&a.options.map?a.options.map.getBounds():void 0};o.geocode(n,function(e,o){var n;e.length>0&&(n=e[0]),t&&t({loaded:o===google.maps.GeocoderStatus.OK&&void 0!==n,position:o===google.maps.GeocoderStatus.OK?n.geometry.location:null,address:o===google.maps.GeocoderStatus.OK?n.formatted_address:null,results:e,status:o})})},a.onVisibleChanged=function(e){a.utils.addToEvents(e,s.visibleChanged)},a.onFailed=function(e){a.utils.addToEvents(e,s.failed)},i()};var move=window.move=window.move||{};move.map=move.map||{},move.map.Areas=function(e,t){var o,n,i,a=this;move.map.Extension.call(this,e),a.setOptions(e),this.groups={RDC:{city:["area-city"],zip:["area-zipCode"],neighborhood:["area-neighborhood"]}},i=function(){var e={type:"search-area",zoomRange:[1,21],discovery:!1,checkMeta:!1,entities:{polygon:{mapping:"boundary",display:!0,options:{fillColor:"#000000",fillOpacity:.05,strokeColor:"#547AB9",strokeOpacity:1,strokeWeight:2,zIndex:1}}}};a.options.events&&(e.entities.polygon.events=a.options.events),a.register(e),t&&t(a)},n=function(e){var t=e.type.indexOf("-zipCode")>-1?"%s":"";return['<div data-id="',e.id,'" data-type="',e.type,'" class="map-core-label ',e.type.substring(e.type.indexOf("-")+1),'" style="pointer-events:all;">'+t+"</div>"].join("")},o=function(){},i()},move.map.Areas.prototype=Object.create(move.map.Extension.prototype),move.map.Areas.prototype.constructor=move.map.Areas;var move=window.move=window.move||{};move.map=move.map||{},move.map.Schools=function(e,t){var o,n,i,a,s,r,l,u,c,p,d=this,g={},m={selectedChanged:[],pinClicked:[]},h=999;move.map.Extension.call(this,e),d.setOptions(e),d.options.events.load=d.options.events.load||d.client.getSchools,d.groups={RDC:{district:["district"],privateSchool:["school-private"],publicSchool:["school-elementary","school-secondary","school-high"],elementarySchool:["school-elementary"],secondarySchool:["school-secondary"],highSchool:["school-high"],schoolTypes:["school-elementary","school-secondary","school-high"]}},d.icons={district:{normal:{x:0,y:923},hover:{x:0,y:977},selected:{x:0,y:977}},"school-elementary":{normal:{x:38,y:923},hover:{x:38,y:977},selected:{x:38,y:977}},"school-secondary":{normal:{x:78,y:923},hover:{x:78,y:977},selected:{x:78,y:977}},"school-high":{normal:{x:117,y:923},hover:{x:117,y:977},selected:{x:117,y:977}},"school-private":{normal:{x:0,y:1031},hover:{x:41,y:1031},selected:{x:41,y:1031}}},d.setSelected=function(e){if(e=e||{},g.type!==e.type||g.id!==e.id){if(u()){var t=d.cache.data[g.type].items[g.id];t&&l(t)}g={},jQuery.extend(!0,g,e),jQuery.each(m.selectedChanged,function(e,t){t&&t(g)})}},d.getSelected=function(){return g},d.onSelectedChanged=function(e){d.utils.addToEvents(e,m.selectedChanged)},d.onPinClicked=function(e){d.utils.addToEvents(e,m.pinClicked)},d.find=function(e,t){var o=d.cache.data[e.type].items[e.id];return o&&t&&d.trigger(o,"marker",t),o},d.updateCount=function(e){if(d.options.notification&&d.options.notification.options){e=void 0===e?0:e;var t=d.options.notification.options.container.find(".match-properties");t.length>0&&(0===e?t.html("No Matching Properties"):t.html([e," Matching Properties"].join("")))}},d.addPolygon=function(e,t){var o=d.cache.data[e].items[t];o&&o.map&&o.map.polygon&&o.map.polygon.setMap&&o.map.polygon.setMap(d.map)},d.removePolygon=function(e,t){var o=d.cache.data[e].items[t];o&&o.map&&(o.map.polygon&&o.map.polygon.setMap&&o.map.polygon.setMap(null),o.map.marker&&l(o))},d.closeNotification=function(e){e=void 0!==e&&e,d.options.notification&&d.options.notification.hide(),d.options.events&&d.options.events.notificationClosed&&d.options.events.notificationClosed(e)},o=function(){var e=[14,21];d.onComplete(p),d.register({type:"district",zoomRange:[12,21],entities:{marker:{mapping:"center",display:!0,options:{icon:{origin:d.icons.district.normal,size:{height:45,width:36},url:[d.options.url,"/Content/Images/map-sprite-phase1.png"].join("")},title:n,zIndex:14},events:{click:i,mouseover:s,mouseout:r}},polygon:{mapping:"boundary",display:!1,options:{fillColor:"#E6B025",fillOpacity:.08,strokeColor:"#EB7425",strokeOpacity:1,strokeWeight:2,zIndex:4}}}}),d.register({type:"school-elementary",zoomRange:e,entities:{marker:{mapping:"center",display:!0,options:{icon:{origin:d.icons["school-elementary"].normal,size:{height:45,width:36},url:[d.options.url,"/Content/Images/map-sprite-phase1.png"].join("")},title:n,zIndex:15},events:{click:i,mouseover:s,mouseout:r}},polygon:{mapping:"boundary",display:!1,options:{fillColor:"#E6B025",fillOpacity:.08,strokeColor:"#EB7425",strokeOpacity:1,strokeWeight:2,zIndex:5}}}}),d.register({type:"school-secondary",zoomRange:e,entities:{marker:{mapping:"center",display:!0,options:{icon:{origin:d.icons["school-secondary"].normal,size:{height:45,width:36},url:[d.options.url,"/Content/Images/map-sprite-phase1.png"].join("")},title:n,zIndex:16},events:{click:i,mouseover:s,mouseout:r}},polygon:{mapping:"boundary",display:!1,options:{fillColor:"#E6B025",fillOpacity:.08,strokeColor:"#EB7425",strokeOpacity:1,strokeWeight:2,zIndex:6}}}}),d.register({type:"school-high",zoomRange:e,entities:{marker:{mapping:"center",display:!0,options:{icon:{origin:d.icons["school-high"].normal,size:{height:45,width:36},url:[d.options.url,"/Content/Images/map-sprite-phase1.png"].join("")},title:n,zIndex:16},events:{click:i,mouseover:s,mouseout:r}},polygon:{mapping:"boundary",display:!1,options:{fillColor:"#E6B025",fillOpacity:.08,strokeColor:"#EB7425",strokeOpacity:1,strokeWeight:2,zIndex:6}}}}),d.register({type:"school-private",zoomRange:e,entities:{marker:{mapping:"center",display:!0,options:{icon:{origin:d.icons["school-private"].normal,size:{height:45,width:36},url:[d.options.url,"/Content/Images/map-sprite-phase1.png"].join("")},title:n,zIndex:16},events:{click:i,mouseover:s,mouseout:r}},polygon:{mapping:"boundary",display:!1,options:{fillColor:"#E6B025",fillOpacity:.08,strokeColor:"#EB7425",strokeOpacity:1,strokeWeight:2,zIndex:6}}}}),d.options.events&&(d.options.events.pinClicked&&d.onPinClicked(d.options.events.pinClicked),d.options.events.selectedChanged&&d.onSelectedChanged(d.options.events.selectedChanged)),t&&t()},u=function(){return g&&g.type&&g.id},c=function(e,t){return u()&&g.type===e&&g.id===t},n=function(e){return e.label},i=function(){var e=this.move.type,t=this.move.id,o=d.cache.data[e].items[t];c(e,t)?(l(o),d.setSelected(),d.closeNotification(!0)):(u()&&(d.removePolygon(g.type,g.id),d.closeNotification(!1)),d.setSelected({type:e,id:t}),a(o))},a=function(e){d.utils.hasValue(e.districtName)||(e.districtName="N/A"),d.utils.hasValue(e.rating)||(e.rating="NR"),jQuery.each(m.pinClicked,function(t,o){o&&o(e)})},s=function(){var e=this.move.type,t=this.move.id,o=c(e,t);l(this,o?"selected":"hover"),u()?o||d.addPolygon(e,t):d.addPolygon(e,t),this.setZIndex(h)},r=function(){var e=this.move.type,t=this.move.id,o=d.types[e],n=o&&o.entities&&o.entities.marker&&void 0!==o.entities.marker.zIndex?o.entities.marker.zIndex:1,i=c(e,t);l(this,i?"selected":"normal"),u()?i||d.removePolygon(e,t):d.removePolygon(e,t),this.setZIndex(n)},l=function(e,t){var o,n,i,a,s={};e.type&&e.map?(n=e.type,o=e.map.marker):e.move&&(n=e.move.type,o=e),i=d.types[n],t=t||"normal",a="normal"===t?i.entities.marker.options.zIndex:h,jQuery.extend(!0,s,i.entities.marker.options.icon),s.origin=d.utils.toPoint(d.icons[n][t]),o.setIcon(s),o.setZIndex(a)},p=function(){var e,t=function(){d.options.notification&&d.options.notification.getVisible()===!0&&d.closeNotification(!0)};u()&&d.cache.exists(g.type)?(e=d.cache.data[g.type].items[g.id],e?(a(e),d.hide(g.type,"polygon"),d.addPolygon(g.type,g.id),l(e,"selected")):(t(),d.setSelected())):(t(),d.setSelected())},o()},move.map.Schools.prototype=Object.create(move.map.Extension.prototype),move.map.Schools.prototype.constructor=move.map.Schools;var move=window.move=window.move||{};move.map=move.map||{},move.map.Properties=function(e,t){var o,n,i,a,s,r,l,u,c,p,d,g,m,h,y,v,f,b,w,C,x,j,O,S,L,k,V,P=this,T={},M=!1,Q=!0,E={selectedChanged:[],selectedMouseover:[],selectedMouseout:[],pinMouseover:[],pinMouseout:[],pinClicked:[],clusterMouseover:[],clusterMouseout:[],clusterClicked:[],enabledSimplePin:[]},R={};move.map.Extension.call(this,e),P.setOptions(e),P.setSelected=function(e){e=e||{},T.type===e.type&&T.id===e.id||(T={},jQuery.extend(!0,T,e),jQuery.each(E.selectedChanged,function(e,t){t&&t(T)}))},P.getSelected=function(e){var t;return T.type===e&&(t=T.id),t},P.select=function(e){var t,i,a={};e=e||{},t=j(e),o(),e&&e.type&&t&&(a={type:e.type,selected:e.id.toString().indexOf(",")>-1?null:e.id.toString(),id:t},t.toString().indexOf("group")>-1&&(i=P.cache.data[e.type].group[t],i&&(a.group=i.group)),n(a)),P.setSelected(e)},P.find=function(e,t){var o,n;return n=j(e),o=x({type:e.type,id:n,forced:e.forced},t)},P.getSelectedPosition=function(e){e=e||T;var t,o,n,i=[];return e.type&&e.id&&(e.id.toString().indexOf(",")>-1?(i=e.id.toString().split(","),i.length>0&&(t=i[0])):t=e.id,e.type&&t&&(n=P.cache.data[e.type].items[t],n&&(n=P.create(n),n.map&&n.map.position&&(o=n.map.position)))),o},P.getSelectedPoint=function(e){e=e||T;var t,o,n,i=P.getSelectedPosition(e);return i&&(o=P.types[e.type],o&&o.layer&&o.layer.getProjection&&(n=o.layer.getProjection(),t=n.fromLatLngToContainerPixel(i))),t},P.setEnabledSimplePin=function(e){Q!==e&&(Q=e,jQuery.each(E.enabledSimplePin,function(e){e(Q)}))},P.getEnabledSimplePin=function(){return Q},P.onSelectedChanged=function(e){P.utils.addToEvents(e,E.selectedChanged)},P.onSelectedMouseover=function(e){P.utils.addToEvents(e,E.selectedMouseover)},P.onSelectedMouseout=function(e){P.utils.addToEvents(e,E.selectedMouseout)},P.onPinMouseover=function(e){P.utils.addToEvents(e,E.pinMouseover)},P.onPinMouseout=function(e){P.utils.addToEvents(e,E.pinMouseout)},P.onPinClicked=function(e){P.utils.addToEvents(e,E.pinClicked)},P.onClusterMouseover=function(e){P.utils.addToEvents(e,E.clusterMouseover)},P.onClusterMouseout=function(e){P.utils.addToEvents(e,E.clusterMouseout)},P.onClusterClicked=function(e){P.utils.addToEvents(e,E.clusterClicked)},P.onEnabledSimplePinChanged=function(e){P.utils.addToEvents(e,E.enabledSimplePin)},k=function(){P.onComplete(O),P.onTypeAvailableChanged(S),P.register({type:"property",zoomRange:[1,21],group:!0,groupRadius:0,entities:{htmlMarker:{mapping:"position",display:!0,options:{content:a,offset:{x:-9,y:-30},zIndex:101},events:{touchstart:d,touchend:g,click:m,mouseover:y,mouseout:v,rightclick:V}}}}),P.register({type:"lotPrice",zoomRange:[18,21],group:!0,groupRadius:0,entities:{htmlMarker:{mapping:"position",display:!0,options:{content:a,offset:{x:-10,y:-31},zIndex:100},events:{touchstart:d,touchend:g,click:m,mouseover:y,mouseout:v,rightclick:V}}}}),P.setTypeEnabled("lotPrice",!0),P.register({type:"agent-property",zoomRange:[1,21],group:!1,groupRadius:0,entities:{htmlMarker:{mapping:"position",display:!0,options:{content:P.defaultHtmlContent,zIndex:101},events:{touchstart:d,touchend:g,click:m,mouseover:y,mouseout:v}}}}),P.register({type:"cluster",zoomRange:[4,17],group:!0,groupRadius:35,checkMeta:!1,entities:{htmlMarker:{mapping:"center",display:!0,options:{content:s,offset:{x:-15,y:-11},zIndex:99},events:{touchstart:d,touchend:g,click:m,mouseover:function(e){var t,o=i(jQuery(this)),n=[];o&&(o.id.toString().indexOf("group")>-1?n=P.cache.data[o.type].group[o.id].group:n.push(o.id),jQuery.each(n,function(n,i){t=P.cache.data[o.type].items[i],t&&t.map.polygon&&f.call(t.map.polygon),jQuery.each(E.clusterMouseover,function(o,n){n&&n(t,e)})}))},mouseout:function(e){var t,o=i(jQuery(this)),n=[];o&&(o.id.toString().indexOf("group")>-1?n=P.cache.data[o.type].group[o.id].group:n.push(o.id),jQuery.each(n,function(n,i){t=P.cache.data[o.type].items[i],t&&t.map.polygon&&b.call(t.map.polygon),jQuery.each(E.clusterMouseout,function(o,n){n&&n(t,e)})}))}}},polygon:{mapping:"boundary",display:!0,options:{fillColor:"#7F7F7F",fillOpacity:0,strokeColor:"#7F7F7F",strokeOpacity:0,strokeWeight:2,zIndex:110},events:{mouseover:f,mouseout:b}}}}),P.options.events&&(P.options.events.pinMouseover&&P.onPinMouseover(P.options.events.pinMouseover),P.options.events.pinMouseout&&P.onPinMouseout(P.options.events.pinMouseout),P.options.events.pinClicked&&P.onPinClicked(P.options.events.pinClicked),P.options.events.clusterMouseover&&P.onClusterMouseover(P.options.events.clusterMouseover),P.options.events.clusterMouseout&&P.onClusterMouseout(P.options.events.clusterMouseout),P.options.events.clusterClicked&&P.onClusterClicked(P.options.events.clusterClicked),P.options.events.selectedChanged&&P.onSelectedChanged(P.options.events.selectedChanged)),t&&t()},i=function(e){var t,o={type:e.data("type"),id:e.data("id")};return o.id=void 0!==o.id?o.id.toString():"",o.id.indexOf("group")>-1&&(t=P.cache.data[o.type].group[o.id],t&&(o.group=[],jQuery.extend(!0,o.group,t.group))),o},o=function(e){e?jQuery('*[data-type="'+e+'"]',P.options.mapContainer).removeClass("selected"):jQuery("*[data-type]",P.options.mapContainer).removeClass("selected")},n=function(e){if(e&&e.type&&e.id){var t=C(e.type,e.id);t.addClass("selected"),e.id.toString().indexOf("group")>-1&&e.group&&(R.type!==e.type||R.id!==e.id?L(e):e.selected&&(R.index=jQuery.inArray(e.selected,e.group)+1,t.find(" > .count").html(c(R.index,R.group.length))))}},s=function(e){var t,o,n,i,a,s=[],l=e.status;return e.id.toString().indexOf("group")>-1&&e.group?(t=0,jQuery.each(e.group,function(o,n){a=P.cache.data[e.type].items[n],a&&(a.count&&(t+=a.count),a.label&&s.push(a.label),l||(l=a.status))})):(t=e.count,s.push(e.label)),1===t?(n=r(e,!0),i=u(e,!0)):(n=["clusterBase cluster",t.toString().length," ",l].join(""),i=P.utils.abbreviateNumber(t)),o=['<div data-id="',e.id,'" data-type="',e.type,'" class="',n,'" title="',s.join(" - "),'">',i,"</span></div>"].join("")},a=function(e){var t,o,n,i,a=P.cache.data[e.type].meta,s=0===a.visible?a.count:a.visible,l=P.map.getZoom(),c=!1;return Q===!0&&P.options.simplePin&&P.options.simplePin[e.type]&&(i=P.options.simplePin[e.type],i.calculate?c=i.calculate(l,s):(c=l>=i.zoomRange[0]&&l<i.zoomRange[1],c===!0&&s<i.limitRange[0]?c=!1:c===!1&&s>i.limitRange[1]&&(c=!0))),o=r(e,c),n=u(e,c),t=["<div class='",o,"' data-type='",e.type,"' data-id='",e.id,"' title='",p(e,c),"'>",n,"</div>"].join("")},r=function(e,t){t=void 0!==t&&t;var o,n,i,a=[],s=e.id.indexOf("group")!==-1;return t===!0&&"lotPrice"!==e.type?a.push("map-property-simple-pin "):a.push("map-property-pin "),s&&(n=P.cache.data[e.type].items[e.group[0]]),"lotPrice"===e.type?a.push("lot-price"):(o=s===!0&&n?n.status:e.status,a.push(o)),i="Function"===P.utils.getType(e.listingCount)?e.listingCount.call(e):e.listingCount,i&&i>1?a.push(" multiple"):e.saved===!0||e.isSaved===!0?a.push(" map-sprite saved"):e.viewed!==!0&&e.isViewed!==!0||a.push(" map-sprite viewed"),a.join("")},l=function(e){var t;return void 0!==e.priceRange?(t=["$",P.utils.thousandsSeperator(P.utils.abbreviateNumber(e.priceRange[0])),"+"].join(""),"for_rent"===e.status&&(t=["$",P.utils.thousandsSeperator(e.priceRange[0]),"+/mo"].join(""))):void 0!==e.price&&(t=["$",P.utils.thousandsSeperator(P.utils.abbreviateNumber(e.price))].join(""),"for_rent"===e.status&&(t=[P.utils.thousandsSeperator(e.priceDisplay),"/mo"].join(""))),void 0===t&&(t="$n/a"),t},u=function(e,t){t=void 0!==t&&t;var o,n,i,a,s=[],r=e.id.indexOf("group")!==-1;return t===!0&&"lotPrice"!==e.type?"":(r===!0?s.push('<span class="count">',c(1,e.group.length),"</span>"):(o="Function"===P.utils.getType(e.listingCount)?e.listingCount.call(e):e.listingCount,o&&o>1?s.push('<span class="ldp-pin">+</span><sup>',o,"</sup>"):(n="Function"===P.utils.getType(e.takenOffMarketDate)?e.takenOffMarketDate.call(e):e.takenOffMarketDate,i="Function"===P.utils.getType(e.isPriceReduced)?e.isPriceReduced.call(e):e.isPriceReduced,e.pinPrice||(e.pinPrice=l(e)),a="Function"===P.utils.getType(e.pinPrice)?e.pinPrice.call(e):e.pinPrice,n?s.push(n.substring(0,n.indexOf(",")).replace(" ","&nbsp;")):i===!0?s.push('<span class="map-sprite price-reduced">',a,"</span>"):s.push(a))),s.join(""))},c=function(e,t){return[t," units"].join("")},p=function(e,t){var o,n,i=function(e,t){var o;return o=t===!0?[e.pinPrice?e.pinPrice:l(e)," @ ",e.address].join(""):e.address},a=e.id.indexOf("group")!==-1;return o=i(e,t),a===!0&&(e.sameLocation===!0?(n=P.cache.data[e.type].items[e.group[0]],n&&(o=i(n,t))):o="Multiple properties at close location"),void 0===o&&(o="Address not Available"),o},C=function(e,t,o){return o=void 0===o?"":o,jQuery('*[data-type="'+e+'"][data-id="'+t+'"]'+o,P.options.mapContainer)},x=function(e,t){var o,n,i=e.id?e.id.toString():"";return i.indexOf("group")>-1?(o=C(e.type,i),o&&o.length&&t&&o.trigger(t)):(n=e.type&&e.id?P.cache.data[e.type].items[e.id]:void 0,!n||void 0!==n.plot&&n.plot!==!0||(i=P.cache.exists(e.type,"group")?P.cache.data[e.type].group[e.id]:void 0,i=void 0===i?e.id:i.id,o=C(e.type,i),o&&o.length&&t&&o.trigger(t))),o},d=function(e){var t=jQuery(this),o=jQuery(e.currentTarget);void 0===t.data("type")&&(t=t.parents("[data-type]")),t.addClass("touched"),void 0!==o.data("type")&&h.call(t.get(0),e)},g=function(e){var t=jQuery(this),o=jQuery(e.currentTarget);void 0===t.data("type")&&(t=t.parents("[data-type]")),void 0!==o.data("type")&&t.removeClass("touched")},m=function(e){var t=jQuery(this),o=jQuery(e.currentTarget);void 0===t.data("type")&&(t=t.parents("[data-type]")),t.hasClass("touched")||void 0===o.data("type")||h.call(t.get(0),e)},h=function(e){var t=i(jQuery(this)),o=t.type,n=t.id,a=[];"cluster"===o?(n&&n.toString().indexOf("group")>-1?(t.group=P.cache.data[o].group[n].group,jQuery.each(t.group,function(e,t){a.push(P.cache.data[o].items[t])})):a=P.cache.data[o].items[n],jQuery.each(E.clusterClicked,function(t,o){o&&o(a,e)})):(n&&n.toString().indexOf("group")>-1?(t.group=P.cache.data[o].group[n].group,jQuery.each(t.group,function(e,t){a.push(P.cache.data[o].items[t])}),n=t.group.join(","),L(t)):(L(),a=P.cache.data[o].items[n]),P.select({type:o,id:n,forced:!0}),jQuery.each(E.pinClicked,function(t,o){o&&o(a,e)})),e.preventDefault()},y=function(e){var t=i(jQuery(this)),o=P.cache.data[t.type].items[t.id];w(t)&&(M=!0,jQuery.each(E.selectedMouseover,function(t,n){n&&n(o,e)})),jQuery.each(E.pinMouseover,function(t,n){n&&n(o,e)})},v=function(e){var t=i(jQuery(this)),o=P.cache.data[t.type].items[t.id];(w(t)||M===!0)&&(M=!1,jQuery.each(E.selectedMouseout,function(t,n){n&&n(o,e)})),jQuery.each(E.pinMouseout,function(t,n){n&&n(o,e)})},f=function(){var e=this.move;this.setOptions({fillColor:"#7F7F7F",fillOpacity:.25,strokeColor:"#7F7F7F",strokeOpacity:.5,strokeWeight:2}),C(e.type,e.id).addClass("selected")},b=function(){var e=this.move;this.setOptions({fillColor:"#7F7F7F",fillOpacity:0,strokeColor:"#7F7F7F",strokeOpacity:0,strokeWeight:2}),C(e.type,e.id).removeClass("selected")},w=function(e){var t=!1;return T&&T.type&&T.id&&(t=e.id.indexOf("group")>-1?T.type===e.type&&(T.id.toString()===e.group.join(",")||jQuery.inArray(T.id,e.group)>-1):T.type===e.type&&T.id.toString()===e.id.toString()),t},V=function(e){var t,o=e.target.move,n=o.id,i=e&&e.target&&e.target.cm1004_er_etr&&e.target.cm1004_er_etr.dom;o.id.toString().indexOf("group")>-1?(t=[],jQuery.each(o.group,function(e,n){t.push(P.items[o.type][n])}),n=o.group.join(","),i&&(e.target.cm1004_er_etr.dom.href=t[0].ldpUrl)):(t=P.items[o.type][o.id],i&&(e.target.cm1004_er_etr.dom.href=t.ldpUrl))},j=function(e){var t,o=e.id?e.id.toString():"";return o.indexOf(",")>-1&&e.type?P.cache.exists(e.type,"group")&&(jQuery.each(P.cache.data[e.type].group,function(e,n){if(jQuery.each(n.group,function(n,i){if(o.indexOf(i)>-1)return t=e,!1}),t)return!1}),t&&(o=t)):(o=void 0,e.type&&e.id&&(t=P.cache.data[e.type].items[e.id],t&&(o=t.groupId?t.groupId:t.id))),o},O=function(){var e,t,o=!1;T.type&&T.id&&("lotPrice"===T.type?P.setSelected():T.id.indexOf&&T.id.indexOf(",")>-1?(t=T.id.split(","),jQuery.each(t,function(t,n){if(P.cache.exists(T.type)&&(e=P.cache.data[T.type].items[n]))return o=!0,P.find(T,"click"),!1}),o===!1&&P.setSelected()):P.cache.exists(T.type)?(e=P.cache.data[T.type].items[T.id],e?P.find(T,"click"):P.setSelected()):P.setSelected())},S=function(e){"lotPrice"===e.type&&e.available===!1&&T.type&&"lotPrice"===T.type&&T.id&&P.setSelected()},L=function(e){var t=function(e,t){P.setSelected({type:e.type,id:e.group[t-1]}),C(e.type,e.id," > .count").html(c(t,e.group.length))};if(R.type&&R.id){if(e&&e.type===R.type&&e.id===R.id)return jQuery.extend(!0,R,e),R.index=1,void t(R,1);R={}}},k()},move.map.Properties.prototype=Object.create(move.map.Extension.prototype),move.map.Properties.prototype.constructor=move.map.Properties;var move=window.move=window.move||{};move.map=move.map||{},move.map.YouAreHere=function(e){var t=this,o=!1;t.options=e,t.options.utils=t.options.utils||new move.tools.Utils,t.options.imageUrl=void 0===t.options.imageUrl?[t.options.url,"/Content/Images/green-marker.png?v=",t.options.version].join(""):t.options.imageUrl,t.marker=null,t.position=null,t.item=null,t.add=function(e,o){t.item=e,t.show(o)},t.show=function(e){e?(null!==t.marker&&(t.marker.setMap(null),t.marker=null),t.position=t.options.utils.toPosition(e),t.marker=new google.maps.Marker({position:t.position,animation:google.maps.Animation.DROP,icon:t.options.imageUrl,draggable:!1,clickable:!1}),t.marker.setMap(t.options.map),t.setVisible(!0)):t.setVisible(!0)},t.hide=function(){t.setVisible(!1)},t.setVisible=function(e){t.marker&&t.marker.setVisible(e)},t.getVisible=function(){var e=!1;return t.marker&&(e=t.marker.getVisible()),e},t.setPrintMode=function(e){o=e},t.getPrintMode=function(){return o}};var move=window.move=window.move||{};move.map=move.map||{},move.map.Waiting=function(e){var t=this;t.options={msThreshold:330},jQuery.extend(!0,t.options,e),this.show=function(e){return e=jQuery.extend(!0,{},t.options,e),e.msThreshold&&0!==e.msThreshold?(window.clearTimeout(e.timer),e.timer=window.setTimeout(function(){e.dom.show()},e.msThreshold),e.timer):void e.dom.show()},this.hide=function(e){e.timer&&window.clearTimeout(e.timer),e.dom.hide()}};var move=window.move=window.move||{};move.map=move.map||{},move.map.Component=function(e,t){"use strict";var o,n,i,a,s,r,l,u,c,p,d,g,m,h,y,v,f,b,w,C,x=this,j={changed:[],suspended:[]},O=!1,S=null,L=null,k=500,V=null;x.options=e,x.options.enabled=x.options.enabled||{},x.options.extensions=x.options.extensions||{},x.options.version=x.options.version||"3.0.0",x.client=void 0,x.utils=x.options.utils||new move.tools.Utils,x.storage=x.options.storage||new move.tools.Storage,x.cache=x.options.cache||new move.tools.Cache,x.map=void 0,x.setView=function(e,t){var o;e=e||{},x.map&&(t&&(V=t),e.center&&e.zoom?x.map.setOptions({center:x.utils.toPosition(e.center),zoom:parseInt(e.zoom,10)}):e.bounds&&(o=x.utils.toBounds(e.bounds),x.map.fitBounds(o),s(o)))},x.getBounds=function(e){return x.map&&(e=e||x.map.getBounds(),
e&&e.setZoom(x.map.getZoom())),e&&(e.force=void 0!==e.force&&e.force),e},x.getRadius=function(e){var t,o,n,i,a,s,r,l=3963;return e=e||(x.map?x.map.getBounds():void 0),e&&(o=e.getCenter(),t=e.getNorthEast(),n=o.lat()/57.2958,i=o.lng()/57.2958,a=t.lat()/57.2958,s=t.lng()/57.2958,r=l*Math.acos(Math.sin(n)*Math.sin(a)+Math.cos(n)*Math.cos(a)*Math.cos(s-i))),r},x.getPosition=function(){var e=x.map.getBounds().getCenter();return[e.lat().toFixed(5),e.lng().toFixed(5),x.map.getZoom()].join(",")},x.setPosition=function(e,t){if(e){var o=e.split(",");3===o.length?x.setView({center:{latitude:o[0],longitude:o[1]},zoom:o[2]},t):t&&t()}else t&&t()},x.getSuspended=function(){return O},x.setSuspended=function(e){O!==e&&(O=e,jQuery.each(j.suspended,function(e,t){t(O)}))},x.suspend=function(){x.setSuspended(!0)},x.resume=function(){x.setSuspended(!1)},x.update=function(e){e=e||x.getBounds(),S=e,e&&jQuery.each(j.changed,function(t,o){o&&o(e)})},x.onChanged=function(e){x.utils.addToEvents(e,j.changed)},x.onSuspendChanged=function(e){x.utils.addToEvents(e,j.suspended)},x.options.client&&(x.options.client.getUrl&&x.options.client.getHtml?x.client=x.options.client:x.options.client.url&&x.options.client.id&&(x.client=new move.map.Client(x.options.client))),x.options.container&&(x.options.container.attr("data-status","map-initiating"),x.client&&(x.client.options.mapContainer=x.options.container)),r=function(e,t,o){var n,i,a,s=function(t){var o=e.fromLatLngToContainerPixel(t.getSouthWest()),n=e.fromLatLngToContainerPixel(t.getNorthEast());return new google.maps.Point(Math.abs(o.y-n.y),Math.abs(o.x-n.x))},r=s(t),l=s(o);return 0===Math.floor(r.x)||0===Math.floor(r.y)?0:(n=l.x/r.x,i=l.y/r.y,a=Math.min(n,i),a<1?0:Math.round(Math.log(a)/Math.LN2))},s=function(e){var t,o=new google.maps.OverlayView;o.draw=function(){this.ready||(t=r(this.getProjection(),e,x.map.getBounds()),t>0&&x.map.setZoom(x.map.getZoom()+t),this.ready=!0)},o.setMap(x.map)},i=function(e){var t=new jQuery.Deferred;return e(function(){t.resolve()}),t},l=function(e,t){x.utils.hasValue(t)&&jQuery.extend(!0,e,t),e.events||(e.events={})},n=function(e){return e=e||{},e.map=x.map,e.mapContainer=x.options.container,e.url=void 0===x.client?x.options.url:x.client.options.url,e.version=x.options.version,e.cache=x.cache,e.storage=x.storage,e.utils=x.utils,e.events=e.events||{},e.events.changed=x.onChanged,e},u=function(e){return null!==e&&(window.clearTimeout(e),e=null),e},a=function(){var e=function(){null!==V&&(V(),V=null)};if(null!==L)if(L=u(L),O===!1){var t=x.getBounds();t&&(null!==S&&S.equals(t)?e():(S=t.getCopy(),x.update(),e()))}else e()},c=function(){L=u(L),L=window.setTimeout(a,k)},o=function(){x.options.isPrintMode&&x.options.isPrintMode===!0&&x.youAreHere&&x.youAreHere.setPrintMode(!0)},m=function(){var e=[];e.push(i(w)),e.push(i(v)),e.push(i(d)),e.push(i(g)),e.push(i(y)),e.push(i(b)),e.push(i(C)),e.push(i(h)),e.push(i(f)),jQuery.when(e).then(function(){t&&(o(),x.options.container&&x.options.container.attr("data-status","map-initiated"),t(x))})},d=function(e){if(x.options.enabled.areas){var t=n({client:x.client});l(t,x.options.extensions.areas),x.areas=new move.map.Areas(t,e)}else e&&e()},g=function(e){if(x.options.enabled.schools){var t=n({client:x.client,requestOptions:{boundary:!0}});l(t,x.options.extensions.schools),x.schools=new move.map.Schools(t,e)}else e&&e()},b=function(e){if(x.options.enabled.tiles){var t=n({heatMapTileServer:"http://tiles.move.com",mapTileServer:x.options.tileServiceUrl,lotTileServer:"http://t1.parcelstream.com/VEParcelTileServer.aspx?key=Wy37OL1AEI6X2SthRKBb47708ZTZvHpJaJzxuSSpOZI=&tileID=%TILE_ID%"});l(t,x.options.extensions.tiles),x.tiles=new move.map.Tiles(t)}e&&e()},v=function(e){if(x.options.enabled.properties){var t=n();l(t,x.options.extensions.properties),x.properties=new move.map.Properties(t,e)}else e&&e()},h=function(e){if(x.options.enabled.directions){var t=n();l(t,x.options.extensions.directions),x.directions=new move.map.Directions(t)}e&&e()},y=function(e){if(x.options.enabled.drawingTool){var t=n({client:x.client});l(t,x.options.extensions.drawingTool),x.drawingTool=new move.map.DrawingTool(t,e)}else e&&e()},w=function(e){if(x.options.enabled.waiting){var t=n();x.waiting=new move.map.Waiting(t)}e&&e()},C=function(e){if(x.options.enabled.youAreHere){var t=n();l(t,x.options.extensions.youAreHere),x.youAreHere=new move.map.YouAreHere(t)}e&&e()},f=function(e){if(x.options.enabled.streetView){var t=n();l(t,x.options.extensions.streetView),x.streetView=new move.map.StreetView(t,e)}else e&&e()},(p=function(){var e,t,o,n={};window.google&&window.google.maps&&(jQuery.extend(!0,n,x.options.mapOptions),x.utils.hasValue(n.bounds)&&!x.utils.hasValue(n.center)&&(e=x.utils.toBounds(x.utils.getValue(n.bounds)),e&&(t=e.getCenter(),o=e.zoom?e.zoom:e.calculateZoom(x.options.container.width()),delete n.bounds,n.center=t,n.zoom=parseInt(o,10))),x.utils.hasValue(n.center)&&(n.center=x.utils.toPosition(x.utils.getValue(n.center))),x.map=new google.maps.Map(x.options.container.get(0),n),m(),google.maps.event.addListener(x.map,"idle",c))})()};